@inherits BasicGameView<MonopolyCardGameMainViewModel>

@if (OppenentUsed is null)
{
    <div>
        Needs opponent
    </div>
    return;
}

<GridContainer Columns="auto 15vw 1fr">
    <GridItem Column="1">

        <StackLayout ItemSpacing="20px">
            <StackItem>
                <HandBlazor Hand="_vmData!.TempHand1" Divider=1.5 HandType="EnumHandList.Vertical" TargetContainerSize="85vh" />
            </StackItem>

            <StackItem>
                <div>
                    <GameButtonComponent Display="Cancel Trade" CustomCallBack="OnCancelled" />
                </div>
            </StackItem>




        </StackLayout>
    </GridItem>
    <GridItem Column="2">
        @if (_proposedOpponent.Count > 0 && _proposedYours.Count > 0)
        {
            <StackLayout>
                <StackItem>
                    <BaseFrameBlazor Text="@SelfPlayer!.NickName">
                        <LeftOverLayout>
                            <MainContent>
                                @foreach (var item in _proposedOpponent)
                                {
                                    <CardGraphicsBlazor DeckObject="item" TargetHeight="12vh" />
                                }
                            </MainContent>
                        </LeftOverLayout>

                    </BaseFrameBlazor>
                </StackItem>
                <StackItem>
                    <BaseFrameBlazor Text="@OppenentUsed.NickName">
                        <LeftOverLayout>
                            <MainContent>
                                @foreach (var item in _proposedYours)
                                {
                                    <CardGraphicsBlazor DeckObject="item" TargetHeight="12vh" />
                                }
                            </MainContent>
                        </LeftOverLayout>
                    </BaseFrameBlazor>
                </StackItem>
            </StackLayout>
        }
    </GridItem>
    <GridItem Column="3">
        
        <BaseFrameBlazor Text="@StartText">
            <div style="width: 60vw; height: 55vh;">
                <LeftOverLayout>
                    <MainContent>
                        <WrapLayout ColumnWidth="20vw" RenderList="OppenentUsed.TradePile!.HandList" Context="Card">
                            <div @onclick="() => ClickCard(Card)">
                                <CardGraphicsBlazor DeckObject="Card" TargetHeight="14vh" />
                            </div>


                            @* <CardGraphicsBlazor DeckObject="DeckObject" @key="GetKey" CommandParameter="DeckObject" CommandObject="Hand!.ObjectSingleClickCommand" /> *@
                        </WrapLayout>
                    </MainContent>
                </LeftOverLayout>
            </div>
            
        </BaseFrameBlazor>
        <TempSetsBlazor TargetHeight="25vh"
                        TargetImageSize="8vh"
                        TargetContainerSize="60vw"
                        Mode="EnumMode.Plain"
                        Divider="1.1"
                        TempPiles="_vmData!.TempSets1" />

        
    </GridItem>
</GridContainer>

